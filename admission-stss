<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shree Tikuligadh Secondary School - Admission System</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Add Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f8ff;
            transition: all 0.3s ease;
        }
        .school-header {
            background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .login-container {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
        }
        .sidebar {
            transition: all 0.3s ease;
        }
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            .sidebar.open {
                transform: translateX(0);
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Login Screen -->
    <div id="loginScreen" class="fixed inset-0 flex items-center justify-center z-50 bg-gray-900 bg-opacity-50">
        <div class="login-container p-8 rounded-xl shadow-2xl max-w-md w-full">
            <div class="text-center mb-8">
                <h1 class="text-3xl font-bold text-blue-800">Shree Tikuligadh Secondary School</h1>
                <p class="text-gray-600 mt-2">Admission Management System</p>
            </div>
            <form id="loginForm" class="space-y-6">
                <div>
                    <label for="username" class="block text-sm font-medium text-gray-700">Username</label>
                    <input type="text" id="username" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">Password</label>
                    <input type="password" id="password" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div>
                    <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                        Login
                    </button>
                </div>
            </form>
            <div class="mt-6 text-center text-sm text-gray-500">
                <p>For authorized personnel only</p>
            </div>
            <div id="loginError" class="mt-4 text-center text-sm text-red-600 hidden"></div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="hidden">
        <!-- Mobile Menu Button -->
        <button id="mobileMenuButton" class="md:hidden fixed top-4 left-4 z-40 bg-blue-600 text-white p-2 rounded-md shadow-lg">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
        </button>

        <!-- Sidebar -->
        <div id="sidebar" class="sidebar fixed inset-y-0 left-0 z-30 w-64 bg-blue-800 text-white transition-transform duration-300 ease-in-out">
            <div class="flex items-center justify-center h-16 px-4 school-header">
                <h1 class="text-xl font-bold">STSS Admission</h1>
            </div>
            <nav class="mt-6">
                <div class="px-4 py-2">
                    <button id="dashboardBtn" class="w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-white bg-blue-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                        </svg>
                        Dashboard
                    </button>
                </div>
                <div class="px-4 py-2">
                    <button id="studentsBtn" class="w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-white hover:bg-blue-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                        </svg>
                        Students
                    </button>
                </div>
                <div class="px-4 py-2">
                    <button id="newAdmissionBtn" class="w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-white hover:bg-blue-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                        </svg>
                        New Admission
                    </button>
                </div>
                <div class="px-4 py-2">
                    <button id="reportsBtn" class="w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-white hover:bg-blue-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 17v-2m3 2v-1m3 1v-2m-3 2h.01M12 14h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        Reports
                    </button>
                </div>
                <div class="px-4 py-2">
                    <button id="settingsBtn" class="w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-white hover:bg-blue-700">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        Settings
                    </button>
                </div>
            </nav>
            <div class="absolute bottom-0 w-full px-4 py-4">
                <button id="logoutBtn" class="w-full flex items-center px-4 py-2 text-sm font-medium rounded-md text-white hover:bg-blue-700">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                    </svg>
                    Logout
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="md:ml-64">
            <!-- Top Navigation -->
            <header class="school-header shadow-md">
                <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center">
                    <h1 class="text-xl font-bold text-white">Admission Management System</h1>
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <button id="notificationBtn" class="text-white hover:text-blue-200">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
                                </svg>
                            </button>
                            <span class="absolute top-0 right-0 block h-2 w-2 rounded-full bg-red-500"></span>
                        </div>
                        <div class="flex items-center">
                            <div class="h-8 w-8 rounded-full bg-blue-200 flex items-center justify-center">
                                <span class="text-blue-800 font-medium">AD</span>
                            </div>
                            <span class="ml-2 text-white font-medium">Admin</span>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Dashboard Content -->
            <main class="max-w-7xl mx-auto px-4 py-6 sm:px-6 lg:px-8">
                <!-- Dashboard Section -->
                <div id="dashboardSection" class="fade-in">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-800">Dashboard</h2>
                        <p class="text-gray-600">Welcome to Shree Tikuligadh Secondary School Admission System</p>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-white rounded-lg shadow p-6 card-hover">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-medium text-gray-900">Total Students</h3>
                                    <p id="totalStudents" class="text-2xl font-semibold text-gray-800">0</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6 card-hover">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-green-100 text-green-600">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-medium text-gray-900">Active Admissions</h3>
                                    <p id="activeAdmissions" class="text-2xl font-semibold text-gray-800">0</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow p-6 card-hover">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-yellow-100 text-yellow-600">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                </div>
                                <div class="ml-4">
                                    <h3 class="text-lg font-medium text-gray-900">Pending Applications</h3>
                                    <p id="pendingApplications" class="text-2xl font-semibold text-gray-800">0</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Admissions -->
                    <div class="bg-white rounded-lg shadow overflow-hidden mb-8">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">Recent Admissions</h3>
                        </div>
                        <div class="divide-y divide-gray-200">
                            <div class="px-6 py-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center">
                                            <span class="text-blue-800 font-medium">SK</span>
                                        </div>
                                        <div class="ml-4">
                                            <h4 class="text-sm font-medium text-gray-900">Suresh Karki</h4>
                                            <p class="text-sm text-gray-500">Grade 10, Admission No: 2023-001</p>
                                        </div>
                                    </div>
                                    <div class="text-sm text-gray-500">2 days ago</div>
                                </div>
                            </div>
                            <div class="px-6 py-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="h-10 w-10 rounded-full bg-green-100 flex items-center justify-center">
                                            <span class="text-green-800 font-medium">PM</span>
                                        </div>
                                        <div class="ml-4">
                                            <h4 class="text-sm font-medium text-gray-900">Puja Maharjan</h4>
                                            <p class="text-sm text-gray-500">Grade 8, Admission No: 2023-002</p>
                                        </div>
                                    </div>
                                    <div class="text-sm text-gray-500">5 days ago</div>
                                </div>
                            </div>
                            <div class="px-6 py-4">
                                <div class="flex items-center justify-between">
                                    <div class="flex items-center">
                                        <div class="h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center">
                                            <span class="text-purple-800 font-medium">RT</span>
                                        </div>
                                        <div class="ml-4">
                                            <h4 class="text-sm font-medium text-gray-900">Ramesh Thapa</h4>
                                            <p class="text-sm text-gray-500">Grade 9, Admission No: 2023-003</p>
                                        </div>
                                    </div>
                                    <div class="text-sm text-gray-500">1 week ago</div>
                                </div>
                            </div>
                        </div>
                        <div class="px-6 py-4 bg-gray-50 text-right">
                            <button class="text-sm font-medium text-blue-600 hover:text-blue-500">
                                View all admissions â†’
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Students Section -->
                <div id="studentsSection" class="fade-in hidden">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-800">Students</h2>
                        <p class="text-gray-600">Manage all student records and information</p>
                    </div>

                    <div class="bg-white rounded-lg shadow overflow-hidden mb-8">
                        <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                            <h3 class="text-lg font-medium text-gray-900">Student Records</h3>
                            <div class="flex space-x-2">
                                <button id="exportExcelBtn" class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                                    Export Excel
                                </button>
                                <button id="exportPdfBtn" class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50">
                                    Export PDF
                                </button>
                            </div>
                        </div>
                        <div class="overflow-x-auto">
                            <table class="min-w-full divide-y divide-gray-200">
                                <thead class="bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Admission No</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Grade</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Gender</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact</th>
                                        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="studentsTableBody" class="bg-white divide-y divide-gray-200">
                                    <!-- Student data will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                        <div class="px-6 py-4 bg-gray-50 border-t border-gray-200">
                            <div class="flex justify-between items-center">
                                <div class="text-sm text-gray-500">
                                    Showing <span id="studentsShowing">1</span> to <span id="studentsTotal">10</span> of <span id="studentsCount">0</span> entries
                                </div>
                                <div class="flex space-x-2">
                                    <button id="prevPageBtn" class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50" disabled>
                                        Previous
                                    </button>
                                    <button id="nextPageBtn" class="px-3 py-1 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50" disabled>
                                        Next
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- New Admission Section -->
                <div id="newAdmissionSection" class="fade-in hidden">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-800">New Admission</h2>
                        <p class="text-gray-600">Register a new student for admission</p>
                    </div>

                    <div class="bg-white rounded-lg shadow overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">Student Information</h3>
                        </div>
                        <form id="admissionForm" class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label for="firstName" class="block text-sm font-medium text-gray-700">First Name</label>
                                    <input type="text" id="firstName" name="firstName" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="lastName" class="block text-sm font-medium text-gray-700">Last Name</label>
                                    <input type="text" id="lastName" name="lastName" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="grade" class="block text-sm font-medium text-gray-700">Grade</label>
                                    <select id="grade" name="grade" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">Select Grade</option>
                                        <option value="1">Grade 1</option>
                                        <option value="2">Grade 2</option>
                                        <option value="3">Grade 3</option>
                                        <option value="4">Grade 4</option>
                                        <option value="5">Grade 5</option>
                                        <option value="6">Grade 6</option>
                                        <option value="7">Grade 7</option>
                                        <option value="8">Grade 8</option>
                                        <option value="9">Grade 9</option>
                                        <option value="10">Grade 10</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="gender" class="block text-sm font-medium text-gray-700">Gender</label>
                                    <select id="gender" name="gender" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">Select Gender</option>
                                        <option value="Male">Male</option>
                                        <option value="Female">Female</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="dob" class="block text-sm font-medium text-gray-700">Date of Birth</label>
                                    <input type="date" id="dob" name="dob" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="bloodGroup" class="block text-sm font-medium text-gray-700">Blood Group</label>
                                    <select id="bloodGroup" name="bloodGroup" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <option value="">Select Blood Group</option>
                                        <option value="A+">A+</option>
                                        <option value="A-">A-</option>
                                        <option value="B+">B+</option>
                                        <option value="B-">B-</option>
                                        <option value="AB+">AB+</option>
                                        <option value="AB-">AB-</option>
                                        <option value="O+">O+</option>
                                        <option value="O-">O-</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="fatherName" class="block text-sm font-medium text-gray-700">Father's Name</label>
                                    <input type="text" id="fatherName" name="fatherName" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="motherName" class="block text-sm font-medium text-gray-700">Mother's Name</label>
                                    <input type="text" id="motherName" name="motherName" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="address" class="block text-sm font-medium text-gray-700">Address</label>
                                    <input type="text" id="address" name="address" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="phone" class="block text-sm font-medium text-gray-700">Phone Number</label>
                                    <input type="tel" id="phone" name="phone" required class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="email" class="block text-sm font-medium text-gray-700">Email (Optional)</label>
                                    <input type="email" id="email" name="email" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                                <div>
                                    <label for="previousSchool" class="block text-sm font-medium text-gray-700">Previous School (Optional)</label>
                                    <input type="text" id="previousSchool" name="previousSchool" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                </div>
                            </div>
                            <div class="mt-6">
                                <label for="photo" class="block text-sm font-medium text-gray-700">Student Photo</label>
                                <div class="mt-1 flex items-center">
                                    <span class="inline-block h-12 w-12 rounded-full overflow-hidden bg-gray-100">
                                        <svg class="h-full w-full text-gray-300" fill="currentColor" viewBox="0 0 24 24">
                                            <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" />
                                        </svg>
                                    </span>
                                    <button type="button" class="ml-5 bg-white py-2 px-3 border border-gray-300 rounded-md shadow-sm text-sm leading-4 font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        Change
                                    </button>
                                </div>
                            </div>
                            <div class="mt-6">
                                <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    Submit Admission
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Reports Section -->
                <div id="reportsSection" class="fade-in hidden">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-800">Reports</h2>
                        <p class="text-gray-600">Generate and view various admission reports</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow overflow-hidden">
                            <div class="px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-medium text-gray-900">Admission Statistics</h3>
                            </div>
                            <div class="p-6">
                                <div class="h-64 flex items-center justify-center">
                                    <p class="text-gray-500">Admission statistics chart will be displayed here</p>
                                </div>
                            </div>
                        </div>
                        <div class="bg-white rounded-lg shadow overflow-hidden">
                            <div class="px-6 py-4 border-b border-gray-200">
                                <h3 class="text-lg font-medium text-gray-900">Grade-wise Distribution</h3>
                            </div>
                            <div class="p-6">
                                <div class="h-64 flex items-center justify-center">
                                    <p class="text-gray-500">Grade distribution chart will be displayed here</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mt-6 bg-white rounded-lg shadow overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">Generate Custom Report</h3>
                        </div>
                        <div class="p-6">
                            <form class="space-y-4">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">Report Type</label>
                                    <div class="mt-1 space-y-2">
                                        <div class="flex items-center">
                                            <input id="report-type-admission" name="report-type" type="radio" checked class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300">
                                            <label for="report-type-admission" class="ml-2 block text-sm text-gray-700">Admission Report</label>
                                        </div>
                                        <div class="flex items-center">
                                            <input id="report-type-grade" name="report-type" type="radio" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300">
                                            <label for="report-type-grade" class="ml-2 block text-sm text-gray-700">Grade-wise Report</label>
                                        </div>
                                        <div class="flex items-center">
                                            <input id="report-type-custom" name="report-type" type="radio" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300">
                                            <label for="report-type-custom" class="ml-2 block text-sm text-gray-700">Custom Report</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                    <div>
                                        <label for="start-date" class="block text-sm font-medium text-gray-700">Start Date</label>
                                        <input type="date" id="start-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                    <div>
                                        <label for="end-date" class="block text-sm font-medium text-gray-700">End Date</label>
                                        <input type="date" id="end-date" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                    </div>
                                </div>
                                <div>
                                    <label for="grade-filter" class="block text-sm font-medium text-gray-700">Grade Filter</label>
                                    <select id="grade-filter" multiple class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                                        <option value="1">Grade 1</option>
                                        <option value="2">Grade 2</option>
                                        <option value="3">Grade 3</option>
                                        <option value="4">Grade 4</option>
                                        <option value="5">Grade 5</option>
                                        <option value="6">Grade 6</option>
                                        <option value="7">Grade 7</option>
                                        <option value="8">Grade 8</option>
                                        <option value="9">Grade 9</option>
                                        <option value="10">Grade 10</option>
                                    </select>
                                </div>
                                <div class="pt-2">
                                    <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        Generate Report
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settingsSection" class="fade-in hidden">
                    <div class="mb-8">
                        <h2 class="text-2xl font-bold text-gray-800">Settings</h2>
                        <p class="text-gray-600">Configure system settings and preferences</p>
                    </div>

                    <div class="bg-white rounded-lg shadow overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">System Settings</h3>
                        </div>
                        <div class="p-6">
                            <form class="space-y-6">
                                <div>
                                    <label for="school-name" class="block text-sm font-medium text-gray-700">School Name</label>
                                    <input type="text" id="school-name" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" value="Shree Tikuligadh Secondary School">
                                </div>
                                <div>
                                    <label for="school-address" class="block text-sm font-medium text-gray-700">School Address</label>
                                    <input type="text" id="school-address" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" value="Tikuligadh, Dang, Nepal">
                                </div>
                                <div>
                                    <label for="school-phone" class="block text-sm font-medium text-gray-700">School Phone</label>
                                    <input type="tel" id="school-phone" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" value="+977-82-560123">
                                </div>
                                <div>
                                    <label for="school-email" class="block text-sm font-medium text-gray-700">School Email</label>
                                    <input type="email" id="school-email" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" value="info@stss.edu.np">
                                </div>
                                <div>
                                    <label for="admission-prefix" class="block text-sm font-medium text-gray-700">Admission Number Prefix</label>
                                    <input type="text" id="admission-prefix" class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500" value="STSS-">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700">System Preferences</label>
                                    <div class="mt-2 space-y-2">
                                        <div class="flex items-start">
                                            <div class="flex items-center h-5">
                                                <input id="auto-generate-id" name="auto-generate-id" type="checkbox" checked class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                                            </div>
                                            <div class="ml-3 text-sm">
                                                <label for="auto-generate-id" class="font-medium text-gray-700">Auto-generate admission numbers</label>
                                                <p class="text-gray-500">Automatically generate unique admission numbers for new students</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start">
                                            <div class="flex items-center h-5">
                                                <input id="send-email-notifications" name="send-email-notifications" type="checkbox" class="focus:ring-blue-500 h-4 w-4 text-blue-600 border-gray-300 rounded">
                                            </div>
                                            <div class="ml-3 text-sm">
                                                <label for="send-email-notifications" class="font-medium text-gray-700">Send email notifications</label>
                                                <p class="text-gray-500">Send email notifications for new admissions and updates</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="pt-2">
                                    <button type="submit" class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                        Save Settings
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <div class="mt-6 bg-white rounded-lg shadow overflow-hidden">
                        <div class="px-6 py-4 border-b border-gray-200">
                            <h3 class="text-lg font-medium text-gray-900">User Management</h3>
                        </div>
                        <div class="p-6">
                            <div class="overflow-x-auto">
                                <table class="min-w-full divide-y divide-gray-200">
                                    <thead class="bg-gray-50">
                                        <tr>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Login</th>
                                            <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white divide-y divide-gray-200">
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="flex items-center">
                                                    <div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center">
                                                        <span class="text-blue-800 font-medium">AD</span>
                                                    </div>
                                                    <div class="ml-4">
                                                        <div class="text-sm font-medium text-gray-900">admin</div>
                                                        <div class="text-sm text-gray-500">admin@stss.edu.np</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">Administrator</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Today, 10:30 AM</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                                <a href="#" class="text-blue-600 hover:text-blue-900 mr-3">Edit</a>
                                                <a href="#" class="text-red-600 hover:text-red-900">Delete</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="flex items-center">
                                                    <div class="h-10 w-10 rounded-full bg-purple-100 flex items-center justify-center">
                                                        <span class="text-purple-800 font-medium">RS</span>
                                                    </div>
                                                    <div class="ml-4">
                                                        <div class="text-sm font-medium text-gray-900">registrar</div>
                                                        <div class="text-sm text-gray-500">registrar@stss.edu.np</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800">Registrar</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Yesterday, 3:45 PM</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                                <a href="#" class="text-blue-600 hover:text-blue-900 mr-3">Edit</a>
                                                <a href="#" class="text-red-600 hover:text-red-900">Delete</a>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="flex items-center">
                                                    <div class="h-10 w-10 rounded-full bg-green-100 flex items-center justify-center">
                                                        <span class="text-green-800 font-medium">TR</span>
                                                    </div>
                                                    <div class="ml-4">
                                                        <div class="text-sm font-medium text-gray-900">teacher1</div>
                                                        <div class="text-sm text-gray-500">teacher1@stss.edu.np</div>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800">Teacher</span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2 days ago</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                                <a href="#" class="text-blue-600 hover:text-blue-900 mr-3">Edit</a>
                                                <a href="#" class="text-red-600 hover:text-red-900">Delete</a>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="mt-4">
                                <button class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                    Add New User
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <script>
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDJBjWU8GIEqzL-1OSzlpi4e2zCu8sZUNU",
            authDomain: "chats-system-59eca.firebaseapp.com",
            projectId: "chats-system-59eca",
            storageBucket: "chats-system-59eca.firebasestorage.app",
            messagingSenderId: "249001636859",
            appId: "1:249001636859:web:ced0308f4eba8536a9515e",
            measurementId: "G-BL6726NNPE"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();

        // Check auth state on page load
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('app').classList.remove('hidden');
                loadStudents();
            } else {
                // User is signed out
                document.getElementById('loginScreen').classList.remove('hidden');
                document.getElementById('app').classList.add('hidden');
            }
        });

        // DOM Elements
        const loginForm = document.getElementById('loginForm');
        const logoutBtn = document.getElementById('logoutBtn');
        const loginError = document.getElementById('loginError');
        const mobileMenuButton = document.getElementById('mobileMenuButton');
        const sidebar = document.getElementById('sidebar');

        // Navigation buttons
        const dashboardBtn = document.getElementById('dashboardBtn');
        const studentsBtn = document.getElementById('studentsBtn');
        const newAdmissionBtn = document.getElementById('newAdmissionBtn');
        const reportsBtn = document.getElementById('reportsBtn');
        const settingsBtn = document.getElementById('settingsBtn');

        // Sections
        const dashboardSection = document.getElementById('dashboardSection');
        const studentsSection = document.getElementById('studentsSection');
        const newAdmissionSection = document.getElementById('newAdmissionSection');
        const reportsSection = document.getElementById('reportsSection');
        const settingsSection = document.getElementById('settingsSection');

        // Student table elements
        const studentsTableBody = document.getElementById('studentsTableBody');
        const prevPageBtn = document.getElementById('prevPageBtn');
        const nextPageBtn = document.getElementById('nextPageBtn');
        const studentsShowing = document.getElementById('studentsShowing');
        const studentsTotal = document.getElementById('studentsTotal');
        const studentsCount = document.getElementById('studentsCount');

        // Export buttons
        const exportExcelBtn = document.getElementById('exportExcelBtn');
        const exportPdfBtn = document.getElementById('exportPdfBtn');

        // Admission form
        const admissionForm = document.getElementById('admissionForm');

        // Login
        loginForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            // Hardcoded credentials for demo purposes
            if (username === 'admin' && password === 'admin123') {
                try {
                    // Sign in with email and password
                    await auth.signInWithEmailAndPassword('admin@stss.edu.np', 'admin123');
                    // If successful, onAuthStateChanged will handle the UI change
                } catch (error) {
                    console.error('Login error:', error);
                    loginError.textContent = 'Invalid credentials. Please try again.';
                    loginError.classList.remove('hidden');
                }
            } else {
                loginError.textContent = 'Invalid credentials. Please try again.';
                loginError.classList.remove('hidden');
            }
        });

        // Logout
        logoutBtn.addEventListener('click', () => {
            auth.signOut().then(() => {
                // Sign-out successful, onAuthStateChanged will handle the UI change
            }).catch((error) => {
                console.error('Logout error:', error);
            });
        });

        // Mobile menu toggle
        mobileMenuButton.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });

        // Navigation
        dashboardBtn.addEventListener('click', () => {
            showSection(dashboardSection);
            setActiveButton(dashboardBtn);
        });

        studentsBtn.addEventListener('click', () => {
            showSection(studentsSection);
            setActiveButton(studentsBtn);
        });

        newAdmissionBtn.addEventListener('click', () => {
            showSection(newAdmissionSection);
            setActiveButton(newAdmissionBtn);
        });

        reportsBtn.addEventListener('click', () => {
            showSection(reportsSection);
            setActiveButton(reportsBtn);
        });

        settingsBtn.addEventListener('click', () => {
            showSection(settingsSection);
            setActiveButton(settingsBtn);
        });

        function showSection(section) {
            // Hide all sections
            [dashboardSection, studentsSection, newAdmissionSection, reportsSection, settingsSection].forEach(sec => {
                sec.classList.add('hidden');
            });
            
            // Show the selected section
            section.classList.remove('hidden');
        }

        function setActiveButton(button) {
            // Remove active class from all buttons
            [dashboardBtn, studentsBtn, newAdmissionBtn, reportsBtn, settingsBtn].forEach(btn => {
                btn.classList.remove('bg-blue-700');
                btn.classList.add('hover:bg-blue-700');
            });
            
            // Add active class to the selected button
            button.classList.add('bg-blue-700');
            button.classList.remove('hover:bg-blue-700');
        }

        // Load students data
        function loadStudents() {
            // This is a mock function - in a real app, you would fetch data from Firestore
            const mockStudents = [
                {
                    admissionNo: 'STSS-2023-001',
                    name: 'Suresh Karki',
                    grade: '10',
                    gender: 'Male',
                    contact: '9841234567'
                },
                {
                    admissionNo: 'STSS-2023-002',
                    name: 'Puja Maharjan',
                    grade: '8',
                    gender: 'Female',
                    contact: '9847654321'
                },
                {
                    admissionNo: 'STSS-2023-003',
                    name: 'Ramesh Thapa',
                    grade: '9',
                    gender: 'Male',
                    contact: '9841122334'
                },
                {
                    admissionNo: 'STSS-2023-004',
                    name: 'Sunita Gurung',
                    grade: '7',
                    gender: 'Female',
                    contact: '9845566778'
                },
                {
                    admissionNo: 'STSS-2023-005',
                    name: 'Bikash Shrestha',
                    grade: '10',
                    gender: 'Male',
                    contact: '9849988776'
                }
            ];

            // Clear the table
            studentsTableBody.innerHTML = '';

            // Add students to the table
            mockStudents.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${student.admissionNo}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${student.name}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Grade ${student.grade}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${student.gender}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">${student.contact}</td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <a href="#" class="text-blue-600 hover:text-blue-900 mr-3">Edit</a>
                        <a href="#" class="text-red-600 hover:text-red-900">Delete</a>
                    </td>
                `;
                studentsTableBody.appendChild(row);
            });

            // Update counters
            studentsShowing.textContent = '1';
            studentsTotal.textContent = mockStudents.length;
            studentsCount.textContent = mockStudents.length;
            document.getElementById('totalStudents').textContent = mockStudents.length;
            document.getElementById('activeAdmissions').textContent = mockStudents.length;
            document.getElementById('pendingApplications').textContent = '0';

            // Enable/disable pagination buttons
            prevPageBtn.disabled = true;
            nextPageBtn.disabled = mockStudents.length <= 10;
        }

        // Export to Excel
        exportExcelBtn.addEventListener('click', () => {
            // Create a workbook
            const wb = XLSX.utils.book_new();
            
            // Create a worksheet
            const ws = XLSX.utils.json_to_sheet([
                { 'Admission No': 'STSS-2023-001', 'Name': 'Suresh Karki', 'Grade': '10', 'Gender': 'Male', 'Contact': '9841234567' },
                { 'Admission No': 'STSS-2023-002', 'Name': 'Puja Maharjan', 'Grade': '8', 'Gender': 'Female', 'Contact': '9847654321' },
                { 'Admission No': 'STSS-2023-003', 'Name': 'Ramesh Thapa', 'Grade': '9', 'Gender': 'Male', 'Contact': '9841122334' },
                { 'Admission No': 'STSS-2023-004', 'Name': 'Sunita Gurung', 'Grade': '7', 'Gender': 'Female', 'Contact': '9845566778' },
                { 'Admission No': 'STSS-2023-005', 'Name': 'Bikash Shrestha', 'Grade': '10', 'Gender': 'Male', 'Contact': '9849988776' }
            ]);
            
            // Add the worksheet to the workbook
            XLSX.utils.book_append_sheet(wb, ws, 'Students');
            
            // Export the workbook
            XLSX.writeFile(wb, 'students.xlsx');
        });

        // Export to PDF
        exportPdfBtn.addEventListener('click', () => {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            doc.text('Student List - Shree Tikuligadh Secondary School', 10, 10);
            
            // Add table headers
            doc.text('Admission No', 10, 20);
            doc.text('Name', 50, 20);
            doc.text('Grade', 100, 20);
            doc.text('Gender', 130, 20);
            doc.text('Contact', 160, 20);
            
            // Add table data
            let y = 30;
            [
                { admissionNo: 'STSS-2023-001', name: 'Suresh Karki', grade: '10', gender: 'Male', contact: '9841234567' },
                { admissionNo: 'STSS-2023-002', name: 'Puja Maharjan', grade: '8', gender: 'Female', contact: '9847654321' },
                { admissionNo: 'STSS-2023-003', name: 'Ramesh Thapa', grade: '9', gender: 'Male', contact: '9841122334' },
                { admissionNo: 'STSS-2023-004', name: 'Sunita Gurung', grade: '7', gender: 'Female', contact: '9845566778' },
                { admissionNo: 'STSS-2023-005', name: 'Bikash Shrestha', grade: '10', gender: 'Male', contact: '9849988776' }
            ].forEach(student => {
                doc.text(student.admissionNo, 10, y);
                doc.text(student.name, 50, y);
                doc.text(student.grade, 100, y);
                doc.text(student.gender, 130, y);
                doc.text(student.contact, 160, y);
                y += 10;
            });
            
            doc.save('students.pdf');
        });

        // Handle new admission form submission
        admissionForm.addEventListener('submit', (e) => {
            e.preventDefault();
            
            // Get form values
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const grade = document.getElementById('grade').value;
            const gender = document.getElementById('gender').value;
            const dob = document.getElementById('dob').value;
            const bloodGroup = document.getElementById('bloodGroup').value;
            const fatherName = document.getElementById('fatherName').value;
            const motherName = document.getElementById('motherName').value;
            const address = document.getElementById('address').value;
            const phone = document.getElementById('phone').value;
            const email = document.getElementById('email').value;
            const previousSchool = document.getElementById('previousSchool').value;
            
            // In a real app, you would save this data to Firestore
            console.log('New admission submitted:', {
                firstName, lastName, grade, gender, dob, bloodGroup,
                fatherName, motherName, address, phone, email, previousSchool
            });
            
            // Show success message
            alert('Admission submitted successfully!');
            
            // Reset form
            admissionForm.reset();
            
            // Reload students to show the new addition
            loadStudents();
            
            // Go back to students section
            showSection(studentsSection);
            setActiveButton(studentsBtn);
        });

        // Initialize the app
        function init() {
            // Set dashboard as default view
            showSection(dashboardSection);
            setActiveButton(dashboardBtn);
            
            // Load initial data
            loadStudents();
        }

        // Call init when the app is loaded
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
